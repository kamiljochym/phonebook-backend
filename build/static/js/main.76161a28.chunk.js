(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{28:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){},53:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),i=t(21),a=t.n(i),r=(t(28),t(5)),s=(t(29),t(30),t(31),t(8)),d=t.n(s),u=t(7),l=t(2),b=function(e){var n=e.handleNewSearch;return Object(l.jsx)("div",{className:"search",children:Object(l.jsx)("input",{placeholder:"Search...",onChange:n})})},j=t.p+"static/media/plus.887d2aad.svg",h=function(e){var n=e.newName,t=e.newNumber,c=e.handleNewName,o=e.handleNewNumber,i=e.addName;return Object(l.jsxs)("form",{className:"personform",children:[Object(l.jsx)("div",{children:Object(l.jsx)("input",{id:"namebox",placeholder:"Enter Name",value:n,onChange:c})}),Object(l.jsx)(u.a,{id:"numberbox",defaultCountry:"GB",placeholder:"Enter Number",value:t,onChange:o}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:i,children:Object(l.jsx)("img",{src:j})})})]})},m=t.p+"static/media/trash-2.bba7f8a9.svg",f=t.p+"static/media/edit.f9a98551.svg",O=t.p+"static/media/check.a6151888.svg",p=function(e){var n=e.persons,t=e.deleteName,c=e.editName,o=e.finishEdit,i=e.handleEdit;return Object(l.jsx)("div",{className:"phonebook",children:n.map((function(e,n){return Object(l.jsxs)("div",{className:"phonebook-entry",children:[Object(l.jsxs)("div",{className:"phonebook-entry-details",children:[Object(l.jsx)("div",{className:"phonebook-entry-details-name",children:e.name}),e.inEdit?Object(l.jsx)("input",{id:"p"+e.id,type:"text",defaultValue:e.number,onChange:i}):Object(l.jsx)("div",{className:"phonebook-entry-details-number",children:e.number})]}),Object(l.jsxs)("div",{className:"phonebook-entry-buttons",children:[e.inEdit?Object(l.jsxs)("button",{className:"phonebook-entry-buttons-finish",onClick:function(){return o(e)},children:[" ",Object(l.jsx)("img",{src:O,height:"20px"}),"  "]}):Object(l.jsxs)("button",{className:"phonebook-entry-buttons-edit",onClick:function(){return c(e)},children:[" ",Object(l.jsx)("img",{src:f,height:"20px"})," "]}),Object(l.jsxs)("button",{className:"phonebook-entry-buttons-delete",onClick:function(){return t(e)},children:[Object(l.jsx)("img",{src:m,height:"20px"})," "]})]})]},n)}))})},x=function(e){var n=e.alertMessage,t=e.setShowAlert;return Object(l.jsxs)("div",{className:"notification-container",children:[Object(l.jsx)("div",{children:n}),Object(l.jsx)("button",{onClick:function(){return t(!1)},children:"x"})]})};var g=function(){var e=Object(c.useRef)([]),n=Object(c.useState)([]),t=Object(r.a)(n,2),o=t[0],i=t[1],a=Object(c.useState)(""),s=Object(r.a)(a,2),j=s[0],m=s[1],f=Object(c.useState)(""),O=Object(r.a)(f,2),g=O[0],v=O[1],N=Object(c.useState)(null),w=Object(r.a)(N,2),y=w[0],k=w[1],E=Object(c.useState)(null),C=Object(r.a)(E,2),S=C[0],B=C[1],I=Object(c.useState)(!1),P=Object(r.a)(I,2),F=P[0],L=P[1],A=Object(c.useState)(""),D=Object(r.a)(A,2),M=D[0],J=D[1];return Object(c.useEffect)((function(){d.a.get("/api/persons").then((function(e){i(e.data)}))}),[]),Object(c.useEffect)((function(){d.a.get("/api/persons").then((function(n){e.current=n.data}))})),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h2",{children:"Online Phonebook"}),Object(l.jsx)(h,{newName:j,newNumber:g,handleNewName:function(e){m(e.target.value)},handleNewNumber:v,addName:function(n){n.preventDefault(),console.log(g);var t={id:String(Date.now()),name:j,number:Object(u.b)(g),inEdit:!1};return console.log(t),0!==j.length&&g?(document.getElementById("namebox").style.border="none",document.getElementById("numberbox").style.border="none",Object(u.c)(g)?void d.a.post("/api/persons",t).then((function(n){console.log(n),i(e.current.concat(t))})).catch((function(e){console.log(e)})):(window.alert("Phone number must be valid!"),document.getElementById("numberbox").style.border="solid 1px red",void L(!0))):(L(!0),J("Please enter a Name and Number"),document.getElementById("namebox").style.border="solid 1px red",void(document.getElementById("numberbox").style.border="solid 1px red"))}}),Object(l.jsx)(b,{handleNewSearch:function(n){var t=n.target.value.toLowerCase();if(""!==t){var c=e.current.filter((function(e){return e.name.toLowerCase().includes(t)}));i(c)}else i(e.current)}}),F?Object(l.jsx)(x,{setShowAlert:L,alertMessage:M}):Object(l.jsx)(l.Fragment,{}),Object(l.jsx)(p,{persons:o,deleteName:function(n){window.confirm("Are you sure you want to delete ".concat(n.name))&&(console.log(n),d.a.delete("/api/persons/".concat(n.id)).then((function(t){var c=e.current.filter((function(e){return e.id!==n.id}));i(c)})).catch((function(e){console.log("error in deletion")})))},editName:function(e){null!==y&&(o.find((function(e){return e.id===y})).inEdit=!1,k(e.id)),e.inEdit=!0,k(e.id),B(e.number)},finishEdit:function(n){if(n.inEdit=!1,!Object(u.c)(S))return window.alert("Phone number must be valid"),void k(null);var t={id:n.id,name:n.name,number:S};d.a.put("/api/persons/".concat(n.id),t).then((function(n){var c=e.current.map((function(e){return e.id===t.id?t:e}));i(c)})).catch((function(e){console.log(e)})),k(null)},handleEdit:function(e){B(e.target.value)}})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,57)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),i(e),a(e)}))};a.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),v()}},[[53,1,2]]]);
//# sourceMappingURL=main.76161a28.chunk.js.map